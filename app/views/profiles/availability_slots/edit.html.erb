<h1 class="text-xl font-bold mb-4">参加可能時間を編集</h1>

<% time_options =
  (0..47).map do |i|
    m = i * 30
    label = format("%02d:%02d", m / 60, m % 60)
    [label, label]
  end
%>
<% end_time_options = time_options + [["24:00", "24:00"]] %>

<%= form_with model: @availability_slot, url: profile_availability_slot_path(@availability_slot), method: :patch do |f| %>
  <div class="space-y-3">

    <div>
      <%= f.label :category, "カテゴリ", class: "label" %>
      <%= f.select :category,
                   AvailabilitySlot.categories.keys.map { |k| [t("activerecord.attributes.availability_slot.categories.#{k}"), k] },
                   {},
                   class: "select select-bordered w-full" %>
    </div>

    <div>
      <%= f.label :wday, "曜日", class: "label" %>
      <%= f.select :wday, [["月",0],["火",1],["水",2],["木",3],["金",4],["土",5],["日",6]], {}, class: "select select-bordered w-full" %>
    </div>

    <div class="grid grid-cols-2 gap-3">
      <div>
        <%= f.label :start_time, "開始", class: "label" %>
        <%= f.select :start_time, time_options, { include_blank: true }, class: "select select-bordered w-full" %>
      </div>

      <div>
        <%= f.label :end_time, "終了", class: "label" %>
        <%= f.select :end_time, end_time_options, { include_blank: true }, class: "select select-bordered w-full" %>
      </div>
    </div>

    <% if @availability_slot.errors.any? %>
      <div class="alert alert-error">
        <ul class="list-disc pl-5">
          <% @availability_slot.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="flex gap-3">
      <%= f.submit "更新", class: "btn btn-primary" %>
      <%= link_to "戻る", profile_availability_slots_path, class: "btn" %>
    </div>

  </div>
<% end %>