<%= turbo_frame_tag dom_id(theme, :vote) do %>
  <div class="card card-compact bg-base-200 shadow-sm ring-1 ring-base-300">
    <div class="card-body items-center text-center">
      <span class="text-3xl font-bold text-primary"><%= theme.theme_votes.count %></span>
      <span class="text-xs text-base-content/60">投票</span>
      <% if user_signed_in? %>
        <% voted = current_user.theme_votes.exists?(theme: theme) %>
        <% if voted %>
          <%= button_to "投票を取り消す", theme_vote_path(theme), method: :delete,
                class: "btn btn-outline btn-sm mt-2", form_class: "inline" %>
        <% else %>
          <%= button_to "このテーマに投票", theme_vote_path(theme), method: :post,
                class: "btn btn-primary btn-sm mt-2", form_class: "inline" %>
        <% end %>
      <% else %>
        <%= link_to "ログインして投票", new_user_session_path,
              class: "btn btn-primary btn-sm mt-2" %>
      <% end %>
    </div>
  </div>
<% end %>
